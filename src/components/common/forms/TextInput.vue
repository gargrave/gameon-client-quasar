<template>
  <div class="form-group">
    <label :for="name" v-if="label">{{ label }}</label>

    <!-- basic text input -->
    <input
      v-if="type === 'text'"
      type="text"
      class="form-control"
      :class="{ 'has-error': error }"
      :name="name"
      :placeholder="label"
      :maxlength="maxlength"
      v-model.trim="model">

      <!-- password input -->
      <input
        v-if="type === 'password'"
        type="password"
        class="form-control"
        :class="{ 'has-error': error }"
        :name="name"
        :placeholder="label"
        :maxlength="maxlength"
        v-model.trim="model">

    <p class="form-error">{{ error }}</p>
  </div>
</template>

<script>
export default {
  props: {
    // type 'type' for the input field (text/password)
    type: {
      type: String,
      required: false,
      default: 'text'
    },

    // the value to use for the 'name' property
    name: {
      type: String,
      required: true
    },

    // the (optional) label to place next to input
    label: {
      type: String,
      required: false
    },

    initialValue: {
      type: String,
      required: false
    },

    // error message (if any) pertaining to this field
    error: {
      type: String,
      required: true
    },

    // optional maxlength property
    maxlength: {
      type: String,
      required: false,
      default: '256'
    }
  },

  data () {
    return {
      model: ''
    }
  },

  created () {
    // if an 'initialValue' is provided, set the model to that value
    if (this.initialValue) {
      this.model = this.initialValue
    }
  }
}
</script>
